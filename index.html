<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statecraft - The MUN Society of Hansraj College</title>
    <!-- 1. Loads Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. Loads icons for social media, etc. -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <!-- 3. Configures custom fonts and colors for Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'sans-serif'],
                        'serif': ['Georgia', 'serif'], // A classic font for long-form text
                    },
                    colors: {
                        'brand-blue': {
                            'light': '#2a4a6e',
                            'DEFAULT': '#1e3a5f', // A deep, professional blue
                            'dark': '#142b47',
                        },
                        'brand-gold': {
                            'light': '#f3e9c6',
                            'DEFAULT': '#e0c57c', // A classic, diplomatic gold
                            'dark': '#c8b06f',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Simple scroll-behavior */
        html {
            scroll-behavior: smooth;
        }
    </style>
</head>
<body class="font-sans bg-gray-50 text-gray-800">

    <!-- =========== HEADER / NAVIGATION =========== -->
    <header class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <!-- Brand Logo -->
            <a href="#" class="text-2xl font-bold text-brand-blue-dark">
                Statecraft
            </a>
            <!-- Navigation Links (Desktop) -->
            <div class="hidden md:flex space-x-6">
                <a href="#home" class="text-gray-600 hover:text-brand-blue transition duration-300">Home</a>
                <a href="#about" class="text-gray-600 hover:text-brand-blue transition duration-300">About</a>
                <a href="#prep" class="text-brand-gold-dark font-semibold hover:text-brand-blue transition duration-300">Prep Assistant ✨</a>
                <a href="#events" class="text-gray-600 hover:text-brand-blue transition duration-300">Events</a>
                <a href="#team" class="text-gray-600 hover:text-brand-blue transition duration-300">Team</a>
                <a href="#contact" class="text-gray-600 hover:text-brand-blue transition duration-300">Contact</a>
            </div>
            <!-- Register Button -->
            <a href="#join" class="hidden md:block bg-brand-blue hover:bg-brand-blue-dark text-white font-medium py-2 px-5 rounded-lg shadow-lg hover:shadow-xl transition duration-300">
                Join Us
            </a>
            <!-- Mobile Menu Button (you can add JS for this later) -->
            <button class="md:hidden text-3xl text-brand-blue-dark" id="mobile-menu-button">
                <ion-icon name="menu-outline"></ion-icon>
            </button>
        </nav>
        <!-- Mobile Menu (hidden by default) -->
        <div id="mobile-menu" class="hidden md:hidden px-6 pb-4 space-y-2">
            <a href="#home" class="block text-gray-600 hover:text-brand-blue transition duration-300">Home</a>
            <a href="#about" class="block text-gray-600 hover:text-brand-blue transition duration-300">About</a>
            <a href="#prep" class="block text-brand-gold-dark font-semibold hover:text-brand-blue transition duration-300">Prep Assistant ✨</a>
            <a href="#events" class="block text-gray-600 hover:text-brand-blue transition duration-300">Events</a>
            <a href="#team" class="block text-gray-600 hover:text-brand-blue transition duration-300">Team</a>
            <a href="#contact" class="block text-gray-600 hover:text-brand-blue transition duration-300">Contact</a>
            <a href="#join" class="block bg-brand-blue text-white text-center font-medium py-2 px-5 rounded-lg shadow-lg transition duration-300">
                Join Us
            </a>
        </div>
    </header>

    <main>
        <!-- =========== HERO SECTION =========== -->
        <section id="home" class="h-[90vh] min-h-[600px] bg-brand-blue text-white relative flex items-center justify-center text-center overflow-hidden p-6">
            <!-- Background overlay -->
            <div class="absolute inset-0 bg-black/50 z-10"></div>
            
            <!-- Background Image -->
            <!-- Placeholder for Hansraj College or a diplomatic image -->
            <img src="https://placehold.co/1920x1080/1e3a5f/ffffff?text=Hansraj+College" 
                 alt="Hansraj College" 
                 class="absolute inset-0 w-full h-full object-cover z-0 opacity-50">
            
            <!-- Hero Content -->
            <div class="relative z-20 flex flex-col items-center">
                <h2 class="text-lg md:text-2xl font-light text-brand-gold-light tracking-widest uppercase">
                    The Model United Nations Society
                </h2>
                <h1 class="text-5xl md:text-7xl lg:text-8xl font-serif font-bold my-4 text-white shadow-lg">
                    Statecraft
                </h1>
                <p class="text-xl md:text-3xl font-light text-gray-200">
                    Hansraj College, University of Delhi
                </p>
                <a href="#about" class="mt-10 bg-brand-gold-light text-brand-blue-dark font-bold py-3 px-8 rounded-lg text-lg shadow-xl hover:bg-white hover:shadow-2xl transition duration-300 transform hover:scale-105">
                    Learn More
                </a>
            </div>
        </section>

        <!-- =========== ABOUT SECTION =========== -->
        <section id="about" class="py-20 md:py-32 bg-white">
            <div class="container mx-auto px-6 max-w-4xl text-center">
                <h2 class="text-4xl md:text-5xl font-serif font-bold text-brand-blue-dark mb-6">About Statecraft</h2>
                <p class="text-lg text-gray-700 leading-relaxed mb-4">
                    Welcome to Statecraft, the premier Model United Nations society of Hansraj College. We are dedicated to fostering diplomacy, critical thinking, and a comprehensive understanding of international relations among students.
                </p>
                <p class="text-lg text-gray-700 leading-relaxed">
                    Our society provides a platform for aspiring diplomats to debate pressing global issues, draft resolutions, and develop their public speaking and negotiation skills. We host our own flagship conference and participate in MUNs across the country, upholding a legacy of excellence.
                </p>
            </div>
        </section>

        <!-- =========== DELEGATE PREP ASSISTANT (GEMINI API) =========== -->
        <section id="prep" class="py-20 md:py-32 bg-brand-blue text-white">
            <div class="container mx-auto px-6 max-w-4xl">
                <h2 class="text-4xl md:text-5xl font-serif font-bold mb-6 text-center text-brand-gold-light">
                    Delegate Prep Assistant ✨
                </h2>
                <p class="text-xl text-gray-300 leading-relaxed mb-10 text-center">
                    Instantly research and brainstorm any MUN agenda item using the power of generative AI and real-time web search.
                </p>

                <!-- Input Area -->
                <div class="bg-brand-blue-dark p-8 rounded-xl shadow-2xl">
                    <label for="topicInput" class="block text-xl font-semibold mb-3 text-white">Enter Your Committee Agenda / Topic:</label>
                    <textarea id="topicInput" rows="3" class="w-full p-4 rounded-lg bg-white text-gray-900 border border-brand-gold-light focus:outline-none focus:ring-2 focus:ring-brand-gold resize-none" placeholder="E.g., The question of water scarcity in the Sahel region, with special reference to climate migration."></textarea>
                    
                    <button id="brainstormButton" class="w-full mt-6 bg-brand-gold hover:bg-brand-gold-dark text-brand-blue-dark font-bold py-3 rounded-lg text-lg shadow-xl transition duration-300 flex items-center justify-center">
                        <span id="buttonText">Generate Brainstorm & Policy Ideas</span>
                        <ion-icon name="sync-outline" id="loadingSpinner" class="hidden animate-spin ml-2"></ion-icon>
                    </button>
                    <p id="errorMessage" class="text-red-400 mt-4 hidden text-center font-medium"></p>
                </div>

                <!-- Output Area -->
                <div id="outputContainer" class="mt-12 bg-white p-8 rounded-xl shadow-2xl hidden">
                    <h3 class="text-3xl font-serif font-bold text-brand-blue-dark mb-4 border-b pb-2">Research Brief</h3>
                    <div id="outputContent" class="text-gray-800 leading-relaxed space-y-4">
                        <!-- AI content will be inserted here -->
                    </div>
                    <div id="outputSources" class="mt-6 pt-4 border-t border-gray-200">
                        <h4 class="text-sm font-semibold text-brand-blue-dark mb-2">Sources:</h4>
                        <ul id="sourcesList" class="text-xs text-gray-600 space-y-1">
                            <!-- Sources will be inserted here -->
                        </ul>
                    </div>
                </div>
            </div>
        </section>


        <!-- =========== EVENTS (was Committees) =========== -->
        <section id="events" class="py-20 md:py-32 bg-gray-50">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-serif font-bold text-brand-blue-dark mb-12 text-center">Our Events</h2>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    
                    <!-- Event Card 1 -->
                    <div class="bg-white rounded-lg shadow-xl overflow-hidden transform hover:-translate-y-2 transition duration-300">
                        <img src="https://placehold.co/600x400/1e3a5f/e0c57c?text=Flagship+MUN" alt="Flagship MUN" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold text-brand-blue-dark mb-3">Statecraft MUN 2025</h3>
                            <p class="text-gray-700 mb-4">Our annual flagship conference, bringing together delegates from across the nation for a weekend of intense debate and diplomacy.</p>
                            <a href="#" class="font-medium text-brand-blue hover:text-brand-blue-dark transition duration-300">Learn More &rarr;</a>
                        </div>
                    </div>

                    <!-- Event Card 2 -->
                    <div class="bg-white rounded-lg shadow-xl overflow-hidden transform hover:-translate-y-2 transition duration-300">
                        <img src="https://placehold.co/600x400/2a4a6e/ffffff?text=Workshop" alt="Workshop" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold text-brand-blue-dark mb-3">Diplomacy Workshop</h3>
                            <p class="text-gray-700 mb-4">An introductory workshop for beginners covering Rules of Procedure, research techniques, and position paper writing.</p>
                            <a href="#" class="font-medium text-brand-blue hover:text-brand-blue-dark transition duration-300">View Schedule &rarr;</a>
                        </div>
                    </div>

                    <!-- Event Card 3 -->
                    <div class="bg-white rounded-lg shadow-xl overflow-hidden transform hover:-translate-y-2 transition duration-300">
                        <img src="https://placehold.co/600x400/142b47/f3e9c6?text=Speaker+Session" alt="Speaker Session" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-2xl font-bold text-brand-blue-dark mb-3">Ambassador's Talk</h3>
                            <p class="text-gray-700 mb-4">Gain insights from seasoned diplomats and experts in international relations in our exclusive speaker sessions.</p>
                            <a href="#" class="font-medium text-brand-blue hover:text-brand-blue-dark transition duration-300">Past Speakers &rarr;</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- =========== TEAM (was Secretariat) =========== -->
        <section id="team" class="py-20 md:py-32 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl md:text-5xl font-serif font-bold text-brand-blue-dark mb-12 text-center">Meet the Team</h2>
                <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 md:gap-12">
                    
                    <!-- Team Member Card (Repeat this block) -->
                    <div class="text-center">
                        <img src="https://placehold.co/300x300/f0f0f0/333?text=Photo" alt="Team Member" class="w-40 h-40 mx-auto rounded-full shadow-lg object-cover">
                        <h4 class="text-xl font-bold text-brand-blue-dark mt-4">Full Name</h4>
                        <p class="text-brand-gold-dark font-medium">President</p>
                    </div>
                    
                    <!-- Team Member Card -->
                    <div class="text-center">
                        <img src="https://placehold.co/300x300/f0f0f0/333?text=Photo" alt="Team Member" class="w-40 h-40 mx-auto rounded-full shadow-lg object-cover">
                        <h4 class="text-xl font-bold text-brand-blue-dark mt-4">Full Name</h4>
                        <p class="text-brand-gold-dark font-medium">Vice President</p>
                    </div>

                    <!-- Team Member Card -->
                    <div class="text-center">
                        <img src="https://placehold.co/300x300/f0f0f0/333?text=Photo" alt="Team Member" class="w-40 h-40 mx-auto rounded-full shadow-lg object-cover">
                        <h4 class="text-xl font-bold text-brand-blue-dark mt-4">Full Name</h4>
                        <p class="text-brand-gold-dark font-medium">Director General</p>
                    </div>

                    <!-- Team Member Card -->
                    <div class="text-center">
                        <img src="https://placehold.co/300x300/f0f0f0/333?text=Photo" alt="Team Member" class="w-40 h-40 mx-auto rounded-full shadow-lg object-cover">
                        <h4 class="text-xl font-bold text-brand-blue-dark mt-4">Full Name</h4>
                        <p class="text-brand-gold-dark font-medium">Head of PR</p>
                    </div>
                    
                    <!-- Add more team members as needed -->

                </div>
            </div>
        </section>

        <!-- =========== JOIN US (was Register) =========== -->
        <section id="join" class="py-20 md:py-32 bg-brand-blue-dark text-white text-center">
            <div class="container mx-auto px-6 max-w-3xl">
                <h2 class="text-4xl md:text-5xl font-serif font-bold mb-6">Become a Part of Statecraft</h2>
                <p class="text-xl text-brand-gold-light leading-relaxed mb-10">
                    We are always looking for passionate and dedicated students to join our society. Whether you're a seasoned delegate or a complete beginner, there's a place for you here.
                </p>
                <a href="#" class="bg-white text-brand-blue-dark font-bold py-4 px-10 rounded-lg text-lg shadow-xl hover:bg-brand-gold-light hover:shadow-2xl transition duration-300 transform hover:scale-105">
                    Apply for Membership
                </a>
            </div>
        </section>

        <!-- =========== CONTACT =========== -->
        <section id="contact" class="py-20 md:py-32 bg-gray-50">
            <div class="container mx-auto px-6 max-w-4xl text-center">
                <h2 class="text-4xl md:text-5xl font-serif font-bold text-brand-blue-dark mb-10">Get In Touch</h2>
                <p class="text-lg text-gray-700 leading-relaxed mb-10">
                    Have questions about our events, membership, or sponsorships? Reach out to us!
                </p>
                <div class="flex justify-center space-x-8 text-5xl text-brand-blue-light">
                    <a href="mailto:statecraft.hrc@example.com" class="hover:text-brand-blue-dark transition duration-300" title="Email Us">
                        <ion-icon name="mail-outline"></ion-icon>
                    </a>
                    <a href="#" class="hover:text-brand-blue-dark transition duration-300" title="Follow us on Instagram">
                        <ion-icon name="logo-instagram"></ion-icon>
                    </a>
                    <a href="#" class="hover:text-brand-blue-dark transition duration-300" title="Connect on LinkedIn">
                        <ion-icon name="logo-linkedin"></ion-icon>
                    </a>
                    <a href="#" class="hover:text-brand-blue-dark transition duration-300" title="Follow us on Facebook">
                        <ion-icon name="logo-facebook"></ion-icon>
                    </a>
                </div>
            </div>
        </section>

    </main>

    <!-- =========== FOOTER =========== -->
    <footer class="bg-brand-blue-dark text-brand-gold-light py-10">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 Statecraft - The MUN Society of Hansraj College. All rights reserved.</p>
            <p class="text-sm text-brand-blue-light mt-2">Designed with passion.</p>
        </div>
    </footer>

    <!-- Simple JS for Mobile Menu Toggle -->
    <script>
        const menuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');

        menuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });

        // Close menu when a link is clicked
        mobileMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                mobileMenu.classList.add('hidden');
            });
        });

        // =================================================================
        // =========== GEMINI API INTEGRATION FOR PREP ASSISTANT ===========
        // =================================================================

        const topicInput = document.getElementById('topicInput');
        const brainstormButton = document.getElementById('brainstormButton');
        const outputContainer = document.getElementById('outputContainer');
        const outputContent = document.getElementById('outputContent');
        const outputSources = document.getElementById('outputSources');
        const sourcesList = document.getElementById('sourcesList');
        const loadingSpinner = document.getElementById('loadingSpinner');
        const buttonText = document.getElementById('buttonText');
        const errorMessage = document.getElementById('errorMessage');

        const apiKey = ""; // API key is provided by the canvas environment
        const modelName = 'gemini-2.5-flash-preview-09-2025';
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${modelName}:generateContent?key=${apiKey}`;
        
        // Helper function for exponential backoff
        async function retryWithExponentialBackoff(fetcher, maxRetries = 5, delay = 1000) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetcher();
                    if (response.status !== 429) { // 429 is Too Many Requests
                        return response;
                    }
                } catch (error) {
                    if (i === maxRetries - 1) throw error;
                }
                await new Promise(resolve => setTimeout(resolve, delay * (2 ** i)));
            }
        }

        async function generateBrainstorm() {
            const topic = topicInput.value.trim();
            if (!topic) {
                errorMessage.textContent = "Please enter your MUN agenda or topic to start brainstorming.";
                errorMessage.classList.remove('hidden');
                return;
            }

            // UI State: Loading
            outputContainer.classList.add('hidden');
            errorMessage.classList.add('hidden');
            brainstormButton.disabled = true;
            buttonText.textContent = "Analyzing Topic...";
            loadingSpinner.classList.remove('hidden');

            const systemPrompt = `You are a world-class Model United Nations (MUN) research assistant. 
            Your task is to take a given committee agenda and produce a structured, professional brief suitable for a delegate's preparation.
            The response MUST be formatted in Markdown and MUST contain these three sections in order:
            1. **Key Background and Facts:** A concise summary of the topic's history, current status, and key statistics/figures (if available).
            2. **Three Core Policy Solutions:** Propose three distinct, actionable, and diplomatically sound policy solutions a member state could propose in a resolution.
            3. **Diplomatic Deadlock Analysis:** Briefly analyze the main opposing viewpoints or regional conflicts that make this issue difficult to resolve in the United Nations.
            Ensure the response is detailed, accurate, and relevant to the committee topic provided by the user.`;

            const userQuery = `Generate the MUN preparation brief for the following agenda: "${topic}"`;

            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                // Enable Google Search for real-time, grounded research
                tools: [{ "google_search": {} }],
                systemInstruction: {
                    parts: [{ text: systemPrompt }]
                },
                config: {
                    maxOutputTokens: 2048
                }
            };

            const fetcher = () => fetch(apiUrl, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(payload)
            });

            try {
                const response = await retryWithExponentialBackoff(fetcher);
                const result = await response.json();
                
                const candidate = result.candidates?.[0];

                if (!candidate || !candidate.content?.parts?.[0]?.text) {
                    throw new Error("Received an invalid response from the AI model.");
                }

                // 1. Extract the generated text
                const text = candidate.content.parts[0].text;
                
                // 2. Extract grounding sources
                let sources = [];
                const groundingMetadata = candidate.groundingMetadata;
                if (groundingMetadata && groundingMetadata.groundingAttributions) {
                    sources = groundingMetadata.groundingAttributions
                        .map(attribution => ({
                            uri: attribution.web?.uri,
                            title: attribution.web?.title,
                        }))
                        .filter(source => source.uri && source.title);
                }

                // 3. Display the output
                displayOutput(text, sources);

            } catch (error) {
                console.error("Gemini API Error:", error);
                errorMessage.textContent = "The preparation assistant encountered an error. Please try a different topic or check the console.";
                errorMessage.classList.remove('hidden');
            } finally {
                // UI State: Finished
                brainstormButton.disabled = false;
                buttonText.textContent = "Generate Brainstorm & Policy Ideas";
                loadingSpinner.classList.add('hidden');
            }
        }

        function displayOutput(markdownText, sources) {
            // Simple markdown-to-HTML conversion (only handles basic lists and bolding for display)
            let htmlContent = markdownText
                .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold text
                .replace(/^- (.*)/gm, '<li>$1</li>'); // Unordered lists (simple)

            // Convert sections into block elements for better styling
            htmlContent = htmlContent
                .replace(/#+ (.*)/g, '<h4 class="text-xl font-bold mt-4">$1</h4>') // Headings
                .replace(/(\r\n|\n\r|\r|\n){2,}/g, '</p><p>'); // Double line breaks into paragraphs
            
            // Wrap the whole thing in a p tag if it doesn't start with a header
            if (!htmlContent.startsWith('<h')) {
                htmlContent = `<p>${htmlContent}</p>`;
            }
            
            // Clean up list formatting (simple check)
            if (htmlContent.includes('<li>')) {
                htmlContent = htmlContent.replace(/<\/p><p>/g, ''); // Remove paragraph breaks around lists
                htmlContent = htmlContent.replace(/<li>/g, '<ul class="list-disc list-inside ml-4 space-y-1 mt-2"><li>');
                htmlContent = htmlContent.replace(/<\/li>(?!.*<li>)/g, '</li></ul>');
            }
            
            outputContent.innerHTML = htmlContent;

            // Display sources
            sourcesList.innerHTML = '';
            if (sources.length > 0) {
                sources.forEach((source, index) => {
                    const li = document.createElement('li');
                    li.innerHTML = `<a href="${source.uri}" target="_blank" class="hover:underline text-brand-blue-light">
                        ${index + 1}. ${source.title}
                    </a>`;
                    sourcesList.appendChild(li);
                });
                outputSources.classList.remove('hidden');
            } else {
                outputSources.classList.add('hidden');
            }

            outputContainer.classList.remove('hidden');
        }

        // Attach event listener
        brainstormButton.addEventListener('click', generateBrainstorm);
    </script>

</body>
</html>